<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="YamanOS" />
  <meta name="theme-color" content="#0b0c10" />
  <title>YamanOS v0.3.0</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="os/assets/icon-192.png" />
  <link rel="apple-touch-icon" href="os/assets/icon-180.png" />
  <link rel="stylesheet" href="os/ui/shell.css" />
</head>
<body>
  <div id="boot" class="boot" aria-label="Boot screen">
    <div class="bootCard">
      <div class="bootLogo">Y</div>
      <div class="bootTitle">YamanOS</div>
      <div class="bootSub">v0.3.0 • build 2026-02-01 13:25 UTC</div>
      <div class="bootBar"><div class="bootBarIn"></div></div>
      <div class="bootHint">iOS: Safari → Share → Add to Home Screen</div>
    </div>
  </div>

  <div id="os" class="os hidden" aria-label="YamanOS">
    <div id="wallpaper" class="wallpaper"></div>

    <header class="topbar" aria-label="Top bar">
      <button class="tbBtn" id="startBtn" title="Start"><span class="logoY">Y</span></button>
      <div class="tbTitle" id="tbTitle">Desktop</div>
      <div class="tbRight">
        <button class="tbBtn" id="themeBtn" title="Theme"></button>
        <button class="tbBtn" id="netBtn" title="Network"><span class="ico" data-ico="wifi"></span></button>
        <button class="tbBtn" id="notifBtn" title="Notifications"><span class="ico" data-ico="bell"></span></button>
        <button class="tbBtn clock" id="clockBtn" title="Clock"></button>
      </div>
    </header>

    <main class="desktop" id="desktop" aria-label="Desktop"></main>

    <footer class="taskbar" aria-label="Taskbar">
      <div class="dock">
        <button class="dockBtn" data-action="start"><span class="logoY sm">Y</span></button>
        <button class="dockBtn" data-open="files"><span class="ico" data-ico="folder"></span><span class="dockTxt">Files</span></button>
        <button class="dockBtn" data-open="notes"><span class="ico" data-ico="note"></span><span class="dockTxt">Notes</span></button>
        <button class="dockBtn" data-open="browser"><span class="ico" data-ico="globe"></span><span class="dockTxt">Browser</span></button>
        <button class="dockBtn" data-open="games"><span class="ico" data-ico="gamepad"></span><span class="dockTxt">Games</span></button>
        <div class="dockRun" id="dockRun" aria-label="Running apps"></div>
      </div>
    </footer>

    <section class="panel start hidden" id="startPanel" aria-label="Start menu">
      <div class="startTop">
        <div class="startHdr">Start</div>
        <input id="search" class="search" placeholder="Search apps, files, shortcuts…" autocomplete="off" />
      </div>
      <div class="startBody">
        <div class="startCols">
          <div class="col">
            <div class="colTitle">Pinned</div>
            <div class="grid" id="pinnedGrid"></div>
          </div>
          <div class="col">
            <div class="colTitle">Recent</div>
            <div class="list" id="recentList"></div>
          </div>
        </div>
      </div>
      <div class="startBottom">
        <button class="pill" id="settingsBtn"><span class="ico" data-ico="gear"></span> Settings</button>
      </div>
    </section>

    <section class="panel hidden" id="notifPanel" aria-label="Notifications">
      <div class="panelHdr">
        <div>Notifications</div>
        <button class="pill" id="clearNotifs">Clear</button>
      </div>
      <div class="panelBody" id="notifList"></div>
    </section>

    <section class="panel hidden" id="netPanel" aria-label="Network">
      <div class="panelHdr">
        <div>Network</div>
        <button class="pill" id="closeNet">Close</button>
      </div>
      <div class="panelBody" id="netBody"></div>
    </section>

    <section class="panel hidden" id="clockPanel" aria-label="Clock">
      <div class="panelHdr">
        <div>Date & Time</div>
        <button class="pill" id="closeClock">Close</button>
      </div>
      <div class="panelBody" id="clockBody"></div>
    </section>

    <div class="wmLayer" id="wmLayer" aria-label="Windows layer"></div>
    <div class="ctx hidden" id="ctx" role="menu"></div>
    <div class="toast" id="toast" aria-live="polite"></div>
  </div>

  
  <script>
    // Safety: if something goes wrong, don't leave the boot screen forever.
    setTimeout(() => {
      const b = document.getElementById("boot");
      const o = document.getElementById("os");
      if (b && !b.classList.contains("hidden")) {
        const sub = b.querySelector(".bootSub");
        if (sub) sub.textContent = "Taking longer than expected…";
      }
      // do NOT auto-hide here; main.js will do it or show error text
    }, 2500);
  </script>

  <script type="module" src="os/main.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => navigator.serviceWorker.register("./service-worker.js"));
    }
  </script>
</body>
</html>
