<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!-- iOS/PWA-friendly viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />

  <!-- iOS "Add to Home Screen" -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="TabletOS" />

  <meta name="theme-color" content="#0b0c0f" />
  <title>TabletOS</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="assets/icon-192.png" />
  <link rel="apple-touch-icon" href="assets/icon-180.png" />

  <link rel="stylesheet" href="os/os.css?v=20260201111047" />
</head>
<body>
  <div id="boot" class="boot" aria-label="Boot screen">
    <div class="boot-card">
      <div class="boot-logo">âŠž</div>
      <div class="boot-title">TabletOS</div>
      <div class="boot-sub">Windows-like tablet shell (PWA)</div>
      <div class="boot-progress"><div class="boot-bar"></div></div>
      <div class="boot-hint">
        iPad tip: open in Safari â†’ Share â†’ <b>Add to Home Screen</b> for full-screen mode.
      </div>
    </div>
  </div>

  <div id="os" class="os hidden" aria-label="TabletOS">
    <div class="wallpaper" aria-hidden="true"></div>

    <header class="topbar" aria-label="Top bar">
      <div class="topbar-left">
        <button class="iconbtn" id="btnStart" title="Start">âŠž</button>
        <div class="breadcrumbs" id="breadcrumbs">Desktop</div>
      </div>
      <div class="topbar-right">
        <button class="iconbtn" id="btnSearch" title="Search apps">ðŸ”Ž</button>
        <button class="iconbtn" id="btnTheme" title="Toggle theme">ðŸŒ™</button>
        <div class="clock" id="clock">--:--</div>
      </div>
    </header>

    <main class="desktop" id="desktop" aria-label="Desktop"></main>

    <footer class="taskbar" aria-label="Taskbar">
      <div class="taskbar-left">
        <button class="taskbtn" id="taskStart" title="Start">âŠž</button>
        <button class="taskbtn" id="taskTaskView" title="Task View">â–¦</button>
      </div>
      <div class="taskbar-center" id="taskbarApps" aria-label="Pinned apps"></div>
      <div class="taskbar-right">
        <button class="taskbtn" id="taskWifi" title="Offline/Online">ðŸ“¶</button>
        <button class="taskbtn" id="taskNotif" title="Notifications">ðŸ””</button>
      </div>
    </footer>

    <section class="panel start hidden" id="startMenu" aria-label="Start menu">
      <div class="start-top">
        <div class="start-title">Start</div>
        <input id="startSearch" class="start-search" placeholder="Type to search apps..." autocomplete="off" />
      </div>
      <div class="start-grid" id="startGrid"></div>
      <div class="start-bottom">
        <button class="pill" id="btnInstall">Install</button>
        <button class="pill" id="btnExport">Export Data</button>
        <label class="pill file">
          Import Data
          <input type="file" id="btnImport" accept="application/json" />
        </label>
        <button class="pill danger" id="btnReset">Reset</button>
      </div>
    </section>

    <section class="panel notif hidden" id="notifPanel" aria-label="Notifications">
      <div class="panel-title">Notifications</div>
      <div class="panel-body" id="notifBody"></div>
      <div class="panel-footer">
        <button class="pill" id="btnClearNotif">Clear</button>
      </div>
    </section>

    <!-- Web App Modal Overlay -->
    <div class="overlay hidden" id="overlay" role="dialog" aria-modal="true">
      <div class="overlay-backdrop" id="overlayBackdrop"></div>
      <div class="overlay-card">
        <div class="overlay-top">
          <div class="overlay-title" id="overlayTitle">App</div>
          <div class="overlay-actions">
            <button class="iconbtn" id="overlayPop" title="Open in a new tab">â†—</button>
            <button class="iconbtn" id="overlayClose" title="Close">âœ•</button>
          </div>
        </div>
        <div class="overlay-body" id="overlayBody"></div>
        <div class="overlay-bottom" id="overlayBottom">
          <div class="overlay-note" id="overlayNote"></div>
          <div class="overlay-controls">
            <button class="pill" id="overlayOpen">Open</button>
            <button class="pill" id="overlayBack">Back to OS</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Windows for native apps -->
    <div class="window-layer" id="windowLayer" aria-label="Windows"></div>
  </div>

  <script src="os/os.js?v=20260201111047"></script>
  <script>
    // Service Worker registration (works only on HTTPS or localhost)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js');
    }
  </script>
</body>
</html>
